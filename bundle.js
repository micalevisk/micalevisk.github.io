'use strict';function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}(function(){document.addEventListener('contextmenu',function(e){return e.preventDefault()});try{__init__()}catch(e){document.body.childNodes[3].innerHTML='&nbsp;:-(<br>&nbsp;Something went wrong'}function __init__(){var FUNCTIONS_ENDPOINT='https://wt-89c6c15cc2042eb4fe4b1fb85909cac3-0.sandbox.auth0-extend.com/fetchMicaleviskRepos';function fetchDataFromRestAPI(onSuccess,onError){var xhr=new XMLHttpRequest;xhr.open('GET',FUNCTIONS_ENDPOINT,true);xhr.onerror=onError;xhr.onreadystatechange=function(){if(xhr.readyState===4){(xhr.status===200?onSuccess:onError)(JSON.parse(xhr.response))}};xhr.send()}new Vue({el:'#app',data:{title:'Micalevisk\'s GitHub Repositories',username:'micalevisk',search:'',my_repos:[],message:{title:'Copyright (c) 2018',body:'Heeeeeyy, byyeeeee',error:'666 ERROR',loading:'loading...',author:{name:'Micael Levi L. C.',profile:'https://github.com/micalevisk'}}},created:function created(){this.fetchData()},methods:{getBorderStyle:function getBorderStyle(color,idx){return _defineProperty({'border-bottom-color':color},'border-'+(idx&1?'left':'right')+'-color',color)},fetchData:function fetchData(){var _this=this;var parseGraphQLData=function parseGraphQLData(repos){return repos.map(function(_ref2){var node=_ref2.node;var languages=node.languages.edges;var parsedRepos={name:node.name,url:node.url,description:parserDescription(node.description),homepage:node.homepageUrl,created_at:node.createdAt,updated_at:node.updatedAt,isFork:node.isFork,isPrivate:node.isPrivate,languages:[],language_color:''};if(!!languages[0]){parsedRepos.languages=languages.map(function(_ref3){var _ref3$node=_ref3.node,name=_ref3$node.name,color=_ref3$node.color;return{name:name,color:color}});parsedRepos.language_color=getDeepValue(parsedRepos,['languages',0,'color'])||''}return parsedRepos})};var errorCallback=function errorCallback(error){_this.message.loading=_this.message.error;console.error(error)};var successCallback=function successCallback(_ref4){var data=_ref4.data;_this.my_repos=parseGraphQLData(getDeepValue(data,['viewer','repositories','edges']));_this.message.body=parserDescription(getDeepValue(data,['viewer','bio']))||_this.message.body};fetchDataFromRestAPI(successCallback,errorCallback)}},computed:{filteredRepos:function filteredRepos(){var _this2=this;if(!this.search.trim())return this.my_repos;return this.my_repos.filter(function(_ref5){var languages=_ref5.languages;return languages.map(function(lang){return lang.name.toLowerCase()}).includes(_this2.search.toLowerCase())})}}});function parserDescription(str){var strParsed=str||'';return removeEmojis(strParsed.replace(/\B:\w+:\B/g,''))}var removeEmojis=function removeEmojis(str){return str.replace(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2694-\u2697]|\uD83E[\uDD10-\uDD5D])/g,'')};var getDeepValue=function getDeepValue(obj,path){return path.reduce(function(xs,x){return xs&&x in xs?xs[x]:undefined},obj)}}})();
